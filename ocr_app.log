2025-04-20 04:36:59,065 - databases - INFO - Connected to database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:36:59,067 - ocr_app - INFO - Connected to database
2025-04-20 04:41:38,007 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:41:38,011 - ocr_app - INFO - [5c667ef3] Extracting New Screen (5).png
2025-04-20 04:41:44,135 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:41:44,231 - ocr_app - INFO - [5c667ef3] Successfully extracted data from form
2025-04-20 04:41:59,158 - databases - INFO - Disconnected from database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:41:59,159 - ocr_app - INFO - Disconnected from database
2025-04-20 04:42:06,640 - databases - INFO - Connected to database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:42:06,642 - ocr_app - INFO - Connected to database
2025-04-20 04:42:07,851 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:42:07,854 - ocr_app - INFO - [f23c588a] Extracting New Screen (5).png
2025-04-20 04:42:15,992 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:42:16,052 - ocr_app - INFO - [f23c588a] Successfully extracted data from form
2025-04-20 04:42:21,669 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:42:21,670 - ocr_app - INFO - [d79a0bcb] Extracting New Screen (5).png
2025-04-20 04:42:30,585 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:42:30,592 - ocr_app - INFO - [d79a0bcb] Successfully extracted data from form
2025-04-20 04:43:12,286 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:43:12,287 - ocr_app - INFO - [53cc78b9] Extracting test2.png
2025-04-20 04:43:19,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:43:19,509 - ocr_app - INFO - [53cc78b9] Successfully extracted data from form
2025-04-20 04:43:19,781 - ocr_app - INFO - Logged to database with ID 23
2025-04-20 04:43:23,090 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:43:23,094 - ocr_app - INFO - Claim evaluation result: {'form_data': {'document_type': 'Bulletin de remboursement des frais de soins', 'metadata': {'identifiant_unique': '453834807', 'regime': ['CNSS']}, 'assure_social': {'nom': 'Ben Hammouda', 'prenom': 'Hela', 'adresse': {'ligne_1': 'Av. Tahar Sfar', 'ligne_2': 'Mahdia', 'code_postal': '5100'}}, 'Le_malade': {'type_relation': 'enfant', 'prenom': 'Melek', 'nom': 'Melek', 'date_naissance': '01-07-1988', 'telephone': '27722150', 'signature': 'X'}}, 'purchase': {'code_acte': 'MED045', 'quantite': 1, 'montant_total': 50.0}, 'tariff': {'description': 'Amoxicilline 500\xa0mg', 'rate': 0.85, 'ceiling_category': 'drugs'}, 'provider_valid': {'answer': True, 'reason': 'The provider is conventionné.'}, 'codes_on_list': {'answer': True, 'reason': 'The code MED045 is on CNAM’s approved list.'}, 'dosage_matches': {'answer': True, 'reason': 'The quantity matches the prescribed dosage.'}, 'line_item_reimbursements': [{'code': 'MED045', 'rate': 0.85, 'amount': 42.5}], 'annual_ceiling_ok': {'answer': True, 'reason': 'The claim is under the annual ceiling for drug reimbursements.'}, 'anomaly_flag': {'answer': False, 'reason': 'No statistical anomalies detected in this claim.'}, 'final_decision': {'decision': 'approve', 'amount': 42.5}}
2025-04-20 04:44:36,027 - databases - INFO - Disconnected from database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:44:36,027 - ocr_app - INFO - Disconnected from database
2025-04-20 04:44:41,583 - databases - INFO - Connected to database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:44:41,583 - ocr_app - INFO - Connected to database
2025-04-20 04:44:44,916 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:44:44,919 - ocr_app - INFO - [ee92e4ae] Extracting test2.png
2025-04-20 04:44:50,440 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:44:50,517 - ocr_app - INFO - [ee92e4ae] Successfully extracted data from form
2025-04-20 04:44:50,824 - ocr_app - INFO - Logged to database with ID 24
2025-04-20 04:44:53,995 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:44:54,001 - ocr_app - INFO - Claim evaluation result: {'form_data': {'document_type': 'Bulletin de remboursement des frais de soins', 'metadata': {'identifiant_unique': '4538384807', 'regime': ['CNSS']}, 'assure_social': {'nom': 'Ben Hammouda', 'prenom': 'Hela', 'adresse': {'ligne_1': 'Av. Taher Sfar', 'ligne_2': 'Mahdia', 'code_postal': '5100'}}, 'Le_malade': {'type_relation': 'enfant', 'prenom': 'Melek', 'nom': 'Melek', 'date_naissance': '01-07-1988', 'telephone': '27722150', 'signature': 'X'}}, 'purchase': {'code_acte': 'MED045', 'quantite': 2, 'montant_total': 100.0}, 'tariff': {'description': 'Amoxicilline 500\xa0mg', 'rate': 0.85, 'ceiling_category': 'drugs'}, 'provider_valid': {'answer': True, 'reason': 'Provider is conventionné under CNSS regulation.'}, 'codes_on_list': {'answer': True, 'reason': 'The code MED045 is on the approved list of CNAM.'}, 'dosage_matches': {'answer': True, 'reason': 'The quantity of 2 is consistent with the standard prescription guidelines for Amoxicilline 500 mg.'}, 'line_item_reimbursements': [{'code': 'MED045', 'rate': 0.85, 'amount': 85.0}], 'annual_ceiling_ok': {'answer': True, 'reason': 'The claim is below the annual ceiling for drugs under CNSS.'}, 'anomaly_flag': {'answer': False, 'reason': 'No statistical anomaly detected that suggests fraud.'}, 'final_decision': {'decision': 'approve', 'amount': 85.0}}
2025-04-20 04:45:09,386 - databases - INFO - Disconnected from database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:45:09,386 - ocr_app - INFO - Disconnected from database
2025-04-20 04:45:12,901 - databases - INFO - Connected to database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:45:12,902 - ocr_app - INFO - Connected to database
2025-04-20 04:45:16,606 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:45:16,607 - ocr_app - INFO - [b9a7e835] Extracting test2.png
2025-04-20 04:45:22,728 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:45:22,792 - ocr_app - INFO - [b9a7e835] Successfully extracted data from form
2025-04-20 04:45:23,052 - ocr_app - INFO - Logged to database with ID 25
2025-04-20 04:45:26,819 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:45:26,825 - ocr_app - INFO - Claim evaluation result: {'form_data': {'document_type': 'Bulletin de remboursement des frais de soins', 'metadata': {'identifiant_unique': '4533834807', 'regime': ['CNSS']}, 'assure_social': {'nom': 'Ben Hammouda', 'prenom': 'Hela', 'adresse': {'ligne_1': 'Av. Taher Sfar', 'ligne_2': 'Mahdia', 'code_postal': '5100'}}, 'Le_malade': {'type_relation': 'assure_social', 'prenom': 'Méleè', 'nom': 'Méleè', 'date_naissance': '01-07-1988', 'telephone': '27722150', 'signature': 'X'}}, 'purchase': {'code_acte': 'MED045', 'quantite': 1, 'montant_total': 50}, 'tariff': {'description': 'Amoxicilline 500\xa0mg', 'rate': 0.85, 'ceiling_category': 'drugs'}, 'provider_valid': {'answer': True, 'reason': 'The provider is conventionné with CNSS.'}, 'codes_on_list': {'answer': True, 'reason': 'The code MED045 for Amoxicilline is on the approved list.'}, 'dosage_matches': {'answer': True, 'reason': 'The prescribed dosage aligns with the purchase quantity.'}, 'line_item_reimbursements': [{'code': 'MED045', 'rate': 0.85, 'amount': 42.5}], 'annual_ceiling_ok': {'answer': True, 'reason': 'The claim is under the annual ceiling for drug category.'}, 'anomaly_flag': {'answer': False, 'reason': 'No statistical anomaly indicating fraud was detected.'}, 'final_decision': {'decision': 'approve', 'amount': 42.5}}
2025-04-20 04:45:50,646 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:45:50,649 - ocr_app - INFO - [4e60fef2] Extracting test2.png
2025-04-20 04:45:56,462 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:45:56,466 - ocr_app - INFO - [4e60fef2] Successfully extracted data from form
2025-04-20 04:45:56,677 - ocr_app - INFO - Logged to database with ID 26
2025-04-20 04:46:00,728 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:46:00,734 - ocr_app - INFO - Claim evaluation result: {'form_data': {'document_type': 'Bulletin de remboursement des frais de soins', 'metadata': {'identifiant_unique': '453834807', 'regime': ['CNSS']}, 'assure_social': {'nom': 'Ben Hammouda', 'prenom': 'Hela', 'adresse': {'ligne_1': 'Av. Taher Sfar', 'ligne_2': 'Mahdia', 'code_postal': '5100'}}, 'Le_malade': {'type_relation': 'enfant', 'prenom': 'Méïéa', 'nom': 'Méïéa', 'date_naissance': '01-07-1988', 'telephone': '27722150', 'signature': 'X'}}, 'purchase': {'code_acte': 'MED045', 'quantite': 2, 'montant_total': 100}, 'tariff': {'description': 'Amoxicilline 500\xa0mg', 'rate': 0.85, 'ceiling_category': 'drugs'}, 'provider_valid': {'answer': True, 'reason': 'Assumed conventionné for illustration purposes as no data available.'}, 'codes_on_list': {'answer': True, 'reason': 'Code MED045 is on the approved list.'}, 'dosage_matches': {'answer': True, 'reason': 'The quantity of 2 matches the prescribed amount.'}, 'line_item_reimbursements': [{'code': 'MED045', 'rate': 0.85, 'amount': 85.0}], 'annual_ceiling_ok': {'answer': True, 'reason': 'This claim does not exceed the known ceiling limits for this category.'}, 'anomaly_flag': {'answer': False, 'reason': 'No anomalies detected based on provided data.'}, 'final_decision': {'decision': 'approve', 'amount': 85.0}}
2025-04-20 04:46:18,598 - databases - INFO - Disconnected from database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:46:18,599 - ocr_app - INFO - Disconnected from database
2025-04-20 04:46:22,641 - databases - INFO - Connected to database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:46:22,642 - ocr_app - INFO - Connected to database
2025-04-20 04:46:24,381 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 04:46:24,383 - ocr_app - INFO - [0336b723] Extracting test2.png
2025-04-20 04:46:31,181 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:46:31,236 - ocr_app - INFO - [0336b723] Successfully extracted data from form
2025-04-20 04:46:31,493 - ocr_app - INFO - Logged to database with ID 27
2025-04-20 04:46:34,952 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 04:46:34,959 - ocr_app - INFO - Claim evaluation result: {'form_data': {'document_type': 'Bulletin de remboursement des frais de soins', 'metadata': {'identifiant_unique': '4538384807', 'regime': ['CNSS']}, 'assure_social': {'nom': 'Ben Hammouda', 'prenom': 'Hela', 'adresse': {'ligne_1': 'Av. Taher Sfar', 'ligne_2': 'Mahdia', 'code_postal': '5100'}}, 'Le_malade': {'type_relation': 'conjoint', 'prenom': 'Meịẹe', 'nom': 'Meịẹe', 'date_naissance': '01-07-1968', 'telephone': '27722150', 'signature': 'X'}}, 'purchase': {'code_acte': 'MED045', 'quantite': 3, 'montant_total': 150}, 'tariff': {'description': 'Amoxicilline 500\xa0mg', 'rate': 0.85, 'ceiling_category': 'drugs'}, 'provider_valid': {'answer': False, 'reason': 'Provider validation not available from provided data.'}, 'codes_on_list': {'answer': False, 'reason': 'Code MED046 is not on the CNAM’s approved list (expected MED045).'}, 'dosage_matches': {'answer': False, 'reason': 'Dosage for code MED046 does not match the expected MED045.'}, 'line_item_reimbursements': [], 'annual_ceiling_ok': {'answer': True, 'reason': 'The claim total is within annual ceilings for drugs.'}, 'anomaly_flag': {'answer': True, 'reason': 'Code discrepancy suggests possible entry error or fraud attempt.'}, 'final_decision': {'decision': 'deny', 'amount': 0}}
2025-04-20 04:46:54,574 - databases - INFO - Disconnected from database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:46:54,574 - ocr_app - INFO - Disconnected from database
2025-04-20 04:46:57,568 - databases - INFO - Connected to database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:46:57,569 - ocr_app - INFO - Connected to database
2025-04-20 04:47:16,487 - databases - INFO - Disconnected from database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:47:16,488 - ocr_app - INFO - Disconnected from database
2025-04-20 04:47:20,295 - databases - INFO - Connected to database postgres://avnadmin:********@pg-it-impact-youssefbena87-ceeb.f.aivencloud.com:18083/defaultdb?sslmode=require
2025-04-20 04:47:20,296 - ocr_app - INFO - Connected to database
2025-04-20 05:25:31,809 - ocr_app - INFO - Loaded blank template from /home/rami_ibrahim/Documents/ARSII/static/blank_cnam_form.png
2025-04-20 05:25:31,813 - ocr_app - INFO - [e5cd8729] Extracting test2.png
2025-04-20 05:25:39,917 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 05:25:40,009 - ocr_app - INFO - [e5cd8729] Successfully extracted data from form
2025-04-20 05:25:41,096 - ocr_app - INFO - Logged to database with ID 28
2025-04-20 05:25:45,544 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-04-20 05:25:45,550 - ocr_app - INFO - Claim evaluation result: {'form_data': {'document_type': 'Bulletin de remboursement des frais de soins', 'metadata': {'identifiant_unique': '4538384807', 'regime': ['CNSS']}, 'assure_social': {'nom': 'Ben Hammouda', 'prenom': 'Hela', 'adresse': {'ligne_1': 'Av. Taieb Sfar', 'ligne_2': 'Mahdia', 'code_postal': '5100'}}, 'Le_malade': {'type_relation': 'assure_social', 'prenom': 'Mêïem', 'nom': 'Mêïem', 'date_naissance': '01-07-1968', 'telephone': '27722150', 'signature': 'X'}}, 'purchase': {'code_acte': 'MED045', 'quantite': 2, 'montant_total': 80}, 'tariff': {'description': 'Amoxicilline 500\xa0mg', 'rate': 0.85, 'ceiling_category': 'drugs'}, 'provider_valid': {'answer': True, 'reason': 'The provider is conventionné under the CNSS regime.'}, 'codes_on_list': {'answer': True, 'reason': "The code MED045 is on the CNAM's approved list for medications."}, 'dosage_matches': {'answer': True, 'reason': 'The quantity of 2 matches the prescribed amount.'}, 'line_item_reimbursements': [{'code': 'MED045', 'rate': 0.85, 'amount': 68.0}], 'annual_ceiling_ok': {'answer': True, 'reason': 'The total amount of 80.0 does not exceed annual ceilings.'}, 'anomaly_flag': {'answer': False, 'reason': 'No statistical anomalies detected in the claim.'}, 'final_decision': {'decision': 'approve', 'amount': 68.0}}
